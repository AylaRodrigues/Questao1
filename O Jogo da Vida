//# Questao1
//Garotes de Programa- Ayla Rodrigues de Moura, Douglas Mareli, João Vitor Spala, Sofia Kitaeva - Questão 1

#include <stdio.h>
#include <stdlib.h>
#include <Windows.h>
#include <locale.h>
#define DIM 30
void copiar(char copia[DIM][DIM], char quadrado[DIM][DIM])
{
    int linha,coluna;

    for(linha = 0 ; linha < DIM ; linha++)
        for(coluna = 0 ; coluna < DIM ; coluna++)
            copia[linha][coluna] = quadrado[linha][coluna];
}
void printar(char quadrado[DIM][DIM])
{
	int linha,coluna;
	for(linha = 0; linha < 30; linha++){
		for(coluna = 0; coluna < 30; coluna++)
			printf("%c",quadrado[linha][coluna]);
	printf("\n");
}
}

int main()
{
	setlocale (LC_ALL, "");
	
	char start,quadrado[DIM][DIM],copia[DIM][DIM];
	int geracoes, ct=0;
	
	int x,y; //linha e coluna
	
	printf("Para inicialização randomica digite 'r', para selecionar as célular digite 'c'\n");
	scanf("%c", &start);
	
	printf("Quantas gerações você quer ver?\n");
	scanf("%d", &geracoes);
	
	//deixando todos os espaços neutros
	for(int i = 0; i < 30; i++)
		{
			for(int j = 0; j< 30; j++)
			{
				quadrado[i][j] = ' ';
			}
		}
		
	//opção randomica
	if (start== 'r')
	{	
		int espacos;
		printf("Quantas células vivas?\n");
		scanf("%d", &espacos);
		
		for(int i = 0; i <= espacos; i++)
		{
			x= rand() %29;
			y= rand() %29;
			quadrado[x][y]= '0';
		}
		
	}
	else 
	{
		//opção de escolha
		printf("Digite as cordenadas das células vivas\n");
		while(x != -1 && y != -1)
		{
			scanf("%d %d",&x,&y);
			quadrado[x-1][y-1] = 1;
		}
	}
	//inicio do jogo
		for(int i=0; i<geracoes; i++)
	{
		ct=0;
		system("cls");
		copiar (copia, quadrado);
		printar (quadrado);
		Sleep(1000);
		for(int x=0; x<30; x++)
		{
			for(int y=0; y<30; y++)
			{
				//calcular se a célula viva morre
				if(copia[x][y]=='0')
				{
					if(copia[x][y-1]=='0')
						ct++;
					if(copia[x+1][y-1]=='0')
						ct++;
					if(copia[x-1][y-1]=='0')
						ct++;
					if(copia[x+1][y]=='0')
						ct++;
					if(copia[x-1][y]=='0')
						ct++;
					if(copia[x][y+1]=='0')
						ct++;
					if(copia[x-1][y+1]=='0')
						ct++;
					if(copia[x+1][y+1]=='0')
						ct++;
					if(ct<2 || ct>3)
						quadrado[x][y]=' ';
				}
				//calcular se a célula morta nasce
				else
				{
					if(copia[x+1][y+1]=='0') ct++;
					if(copia[x][y+1]=='0') ct++;
					if(copia[x-1][y+1]=='0') ct++;
					if(copia[x-1][y]=='0') ct++;
					if(copia[x-1][y-1]=='0') ct++;
					if(copia[x][y-1]=='0') ct++;
					if(copia[x+1][y-1]=='0') ct++;
					if(copia[x+1][y]=='0') ct++;
					if(ct==3) quadrado[x][y]='0';
				}
			}	
		}

}
	return 0;
}
